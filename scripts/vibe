#!/bin/bash
# vibe - Vibe Coding 工具入口

SKILLS_REGISTRY="${SKILLS_REGISTRY:-$HOME/skills-registry}"

usage() {
    echo "Usage: vibe <command> [options]"
    echo ""
    echo "Commands:"
    echo "  init [path]     初始化当前目录（或指定路径）为 Vibe Coding 项目"
    echo "  deinit          从当前目录移除 Vibe Coding 配置"
    echo "  skill <name>    添加技能到当前项目"
    echo "  update          更新所有技能链接"
    echo "  status          查看当前项目 Vibe 状态"
    echo ""
    echo "Examples:"
    echo "  vibe init                    # 初始化当前目录"
    echo "  vibe init ~/projects/myapp   # 初始化指定目录"
    echo "  vibe deinit                  # 移除 Vibe Coding 配置"
    echo "  vibe skill docker            # 添加 docker 技能"
    echo "  vibe update                  # 更新技能链接"
}

case "${1:-}" in
    init)
        shift
        "$SKILLS_REGISTRY/scripts/init-vibe.sh" "$@"
        ;;
    skill)
        shift
        "$SKILLS_REGISTRY/scripts/add-skill.sh" "$@"
        ;;
    update)
        "$SKILLS_REGISTRY/scripts/update-skills.sh"
        ;;
    deinit)
        shift
        "$SKILLS_REGISTRY/scripts/deinit-vibe.sh" "$@"
        ;;
    status)
        "$SKILLS_REGISTRY/scripts/vibe-status.sh"
        ;;
    help|--help|-h)
        usage
        ;;
    *)
        echo "错误: 未知命令: ${1:-}"
        usage
        exit 1
        ;;
esac
