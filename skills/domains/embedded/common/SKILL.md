---
name: c-embedded
description: 嵌入式 C 开发通用规范，包含内存管理、中断处理、寄存器操作等最佳实践。适用于所有嵌入式 C 项目。
created: 2026-02-11
status: draft
---

# C 嵌入式开发规范

> 状态：草稿 - 本 Skill 为模板框架，具体内容待项目实践中填充

## 适用场景

- 裸机嵌入式 C 开发
- 使用 HAL/LL 库的 MCU 开发
- 需要与汇编混合编程的场景

## 核心概念（待完善）

- **内存管理**：栈、堆、静态内存的使用规范
- **中断处理**：ISR 设计原则、延迟处理
- **寄存器操作**：位操作、原子操作
- **时序控制**：延时、超时处理

## 快速开始

本 Skill 作为其他嵌入式 Skill 的基础（如 st-stm32, freertos），通常不需要单独引用。

```c
// 示例：基本的嵌入式 C 代码结构
#include <stdint.h>

// 寄存器定义
#define GPIOA_MODER (*(volatile uint32_t *)0x40020000)

void gpio_init(void) {
    // 使能时钟
    RCC_AHB1ENR |= (1 << 0);
    
    // 配置 GPIO
    GPIOA_MODER &= ~(3 << 10);  // 清除模式位
    GPIOA_MODER |= (1 << 10);   // 设置为输出
}
```

## 代码模式

### 模式 1：内存对齐访问
```c
// TODO: 项目中实践后补充
```

### 模式 2：临界区保护
```c
// TODO: 项目中实践后补充
```

## 常见问题

### 问题 1：未定义行为导致的硬件异常
**现象**：程序随机崩溃或进入 HardFault
**原因**：可能涉及未对齐访问、除零、数组越界等
**解决**：启用编译器警告、使用静态分析工具

### 问题 2：volatile 关键字误用
**现象**：优化后代码行为异常
**原因**：编译器优化移除了必要的内存访问
**解决**：正确标记硬件寄存器和并发变量

## 参考资料

- references/quick-ref.md - 速查表

## 迭代记录

- 2026-02-11: 初始创建（框架模板）
